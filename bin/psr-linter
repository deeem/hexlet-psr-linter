#!/usr/bin/env php

<?php

require_once __DIR__ . '/../vendor/autoload.php';

use \Commando\Command;
use function \PsrLinter\lint;
use function \PsrLinter\report;
use function \PsrLinter\app;

$cmd = new Commando\Command();

$cmd->option()
    ->require(true)
    ->describedAs('One or more files and/or directories to check')
    ->expectsFile();
$cmd
    ->setHelp('Validate php files according PSR2 standards' . PHP_EOL . PHP_EOL. 'Usage: psr-linter <file>');

$errors = app($cmd[0]);

if ($errors) {
    file_put_contents('php://stderr', report($errors));
}

exit(0);
